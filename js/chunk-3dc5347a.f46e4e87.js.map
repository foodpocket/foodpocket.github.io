{"version":3,"sources":["webpack:///./src/views/LoginPage.vue?0071","webpack:///./src/assets/foodpocket_logo.svg","webpack:///./src/views/LoginPage.vue?9a4c","webpack:///src/views/LoginPage.vue","webpack:///./src/views/LoginPage.vue?1674","webpack:///./src/views/LoginPage.vue","webpack:///./node_modules/core-js/modules/es.function.name.js"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","isLoading","on","$event","preventDefault","signin","foodPocketLogo","back","_v","directives","name","rawName","value","expression","domProps","target","composing","username","password","RegisterPage","forget","staticRenderFns","data","computed","infobus","$store","state","dangerbus","components","bus","methods","$router","push","clear","$bus","$emit","loadingMsgId","formdata","append","$http","post","api","then","response","result","console","log","err","component","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","match","error"],"mappings":"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","file":"js/chunk-3dc5347a.f46e4e87.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginPage.vue?vue&type=style&index=0&id=1a0efe08&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginPage.vue?vue&type=style&index=0&id=1a0efe08&lang=scss&scoped=true&\"","module.exports = __webpack_public_path__ + \"img/foodpocket_logo.313923b2.svg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[_c('loading',{attrs:{\"active\":_vm.isLoading},on:{\"update:active\":function($event){_vm.isLoading=$event}}}),_c('bus'),_c('div',{staticClass:\"container\"},[_c('form',{staticClass:\"form\",on:{\"submit\":function($event){$event.preventDefault();return _vm.signin($event)}}},[_c('div',{staticClass:\"logo-wrapper\"},[_c('img',{staticClass:\"logo\",attrs:{\"src\":_vm.foodPocketLogo}})]),_c('h2',{on:{\"click\":_vm.back}},[_vm._v(\"FoodPocket\")]),_c('div',{staticClass:\"group\"},[_c('label',{attrs:{\"for\":\"user_id\"}},[_vm._v(\"帳號\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.username),expression:\"username\"}],attrs:{\"type\":\"text\",\"id\":\"user_id\",\"placeholder\":\"請輸入帳號\",\"required\":\"\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.username=$event.target.value}}})]),_c('div',{staticClass:\"group\"},[_c('label',{attrs:{\"for\":\"user_password\"}},[_vm._v(\"密碼\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"type\":\"password\",\"id\":\"user_password\",\"placeholder\":\"請輸入密碼\",\"required\":\"\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}})]),_c('button',{staticClass:\"btn login-btn\",attrs:{\"type\":\"submit\"}},[_vm._v(\"登入\")]),_c('div',{staticClass:\"button-group\"},[_c('a',{staticClass:\"btn register-btn\",on:{\"click\":function($event){$event.preventDefault();return _vm.RegisterPage($event)}}},[_vm._v(\"還沒有帳號？去註冊\")]),_c('a',{staticClass:\"btn forget-btn\",on:{\"click\":function($event){$event.preventDefault();return _vm.forget($event)}}},[_vm._v(\"忘記密碼\")])])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"login\">\n    <loading :active.sync=\"isLoading\"></loading>\n    <bus/>\n    <div class=\"container\">\n      <form class=\"form\" @submit.prevent=\"signin\">\n        <div class=\"logo-wrapper\">\n          <img class=\"logo\" :src=\"foodPocketLogo\" />\n        </div>\n        <h2 @click=\"back\">FoodPocket</h2>\n        <div class=\"group\">\n          <label for=\"user_id\">帳號</label>\n          <input type=\"text\" id=\"user_id\" placeholder=\"請輸入帳號\" v-model=\"username\" required/>\n        </div>\n        <div class=\"group\">\n          <label for=\"user_password\">密碼</label>\n          <input type=\"password\" id=\"user_password\" placeholder=\"請輸入密碼\" v-model=\"password\" required/>\n        </div>\n        <button type=\"submit\" class=\"btn login-btn\">登入</button>\n        <div class=\"button-group\">\n          <a class=\"btn register-btn\" @click.prevent=\"RegisterPage\">還沒有帳號？去註冊</a>\n          <a class=\"btn forget-btn\" @click.prevent=\"forget\">忘記密碼</a>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport bus from '@/components/bus.vue';\nimport foodPocketLogo from '@/assets/foodpocket_logo.svg';\n\nexport default {\n  data() {\n    return {\n      foodPocketLogo,\n      isLoading: false,\n      username: '',\n      password: '',\n    };\n  },\n  computed: {\n    infobus() {\n      return this.$store.state.infobus;\n    },\n    dangerbus() {\n      return this.$store.state.dangerbus;\n    },\n  },\n  components: {\n    bus,\n  },\n  methods: {\n    back() {\n      this.$router.push('/landingpage');\n    },\n    RegisterPage() {\n      this.$router.push('/registerpage');\n    },\n    clear() {\n      this.username = '';\n      this.password = '';\n    },\n    forget() {\n      this.$router.push('/forgetpasswordpage');\n    },\n    signin() {\n      this.isLoading = true;\n      const loadingMsgId = Math.floor(new Date() / 1000);\n      this.$bus.$emit('message:show', '登入中...', loadingMsgId, this.infobus);\n      const api = `${process.env.VUE_APP_APIPATH}api/rest/loginAccount/`;\n      const formdata = new FormData();\n      formdata.append('username', this.username);\n      formdata.append('password', this.password);\n      this.$http.post(api, formdata).then((response) => {\n        // console.log(response.data)\n        // this.isLoading = false\n        if (response.data.result === 'successful') {\n          const { token } = response.data.data;\n          this.$cookies.set('token', token); // 放到cookies\n          const pocket = response.data.data.last_pocket;\n          const pocketid = pocket.pocket_uid;\n          const pocketname = pocket.name;\n          this.$cookies.set('getpocketid', pocketid); // 放到cookies\n          this.$cookies.set('getpocketname', pocketname); // 放到cookies\n          this.$cookies.set('username', this.username);\n          this.$bus.$emit('message:remove', loadingMsgId);\n          this.$router.push('/foodpocket');\n          this.isLoading = false;\n        } else {\n          this.isLoading = false;\n          this.$bus.$emit('message:remove', loadingMsgId);\n          this.$bus.$emit('message:push', '帳號或密碼輸入錯誤，請再試一次', this.dangerbus);\n          this.password = '';\n        }\n      }).catch((err) => {\n        console.log(err);\n        this.$bus.$emit('message:remove', loadingMsgId);\n        this.$bus.$emit('message:push', '網路異常，請稍候再試', this.dangerbus);\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n\n* {\n  margin: 0;\n}\n\n.login {\n  min-height: 100vh;\n  height: 100%;\n  background-color: $outside-background;\n  .container {\n    margin: auto;\n    padding-top: 50px;\n    width: 90%;\n    .form {\n      width: 100%;\n      color: #555;\n      .logo-wrapper {\n        width: 100%;\n        height: 7rem;\n        margin-bottom: 0vw;\n        object-fit: contain;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n\n        .logo {\n          height: 100%;\n        }\n      }\n      h2 {\n        margin-bottom: 20px;\n        padding-bottom: 20px;\n        border-bottom: 1px solid #000;\n        font-family: 'Monda', sans-serif;\n      }\n      h2:hover{\n        cursor: pointer;\n      }\n      .group {\n        margin-bottom: 20px;\n        label {\n          line-height: 3;\n        }\n        input {\n          background-color: $word-background-dark;\n          -webkit-appearance: none;\n          font-size: 16px;\n          width: 100%;\n          border-radius: 25px;\n          line-height: 2;\n          outline: none;\n          border: none;\n          padding: 5px 15px;\n        }\n        input:focus {\n          outline: none;\n        }\n        input::placeholder{\n          color: $milk-white;\n        }\n      }\n      .login-btn{\n        background-color: $point-btn;\n        color: $milk-white;\n        width: 100%;\n        margin-top: 50px;\n        outline: none;\n      }\n      .btn:focus {\n          outline: none;\n      }.button-group {\n        margin-top: 20px;\n        display: flex;\n        flex-direction: column;\n        .register-btn {\n          margin-top: 20px;\n          outline: none;\n        }\n        .forget-btn {\n          margin-top: 20px;\n          outline: none;\n        }\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LoginPage.vue?vue&type=template&id=1a0efe08&scoped=true&\"\nimport script from \"./LoginPage.vue?vue&type=script&lang=js&\"\nexport * from \"./LoginPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LoginPage.vue?vue&type=style&index=0&id=1a0efe08&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a0efe08\",\n  null\n  \n)\n\nexport default component.exports","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n"],"sourceRoot":""}